<!DOCTYPE>
<html>
	<head>
		<!-- main framework library -->
		<script src="https://aframe.io/releases/0.8.0/aframe.min.js"></script>
		<!-- environment component --> 
		<script src="https://rawgit.com/feiss/aframe-environment-component/master/dist/aframe-environment-component.min.js"></script>
		<!-- gamepad controller component -->
		<script src="dist/aframe-gamepad-controls.js"></script>

<script>
	AFRAME.registerComponent('auto-enter-vr', {
  init: function () {
    this.el.sceneEl.enterVR();
  }
});
</script>		
<script>
/* registers hlink as hyperlink (experimental) */
  AFRAME.registerComponent('hlink', {
  schema: {default: ''},

  init: function () {
    var url = this.data;
    this.el.addEventListener('click', function () {
    window.location.href = url;
 });
}
});
</script>

<script>
	/* animates the sun of environment (experimental - custom component) */
	AFRAME.registerComponent('suntime', {
  schema: {
    from: {type:'vec3', default: {x: 0, y: 1, z: -0.2}},
    to: {type: 'vec3', default: {x: 0, y: 1, z: 0.2}},
    duration: {type: 'int', default: 5000}
  },
  update: function(oldData){
    this.sunPos = {x: this.data.from.x, y: this.data.from.y, z: this.data.from.z};
    this.moveSun();
    this.tween = new AFRAME.TWEEN.Tween(this.sunPos).
      to(this.data.to, this.data.duration).
      easing(TWEEN.Easing.Quadratic.InOut).
      onUpdate(this.moveSun.bind(this)).
      start();
  },
  moveSun: function(){
    var p = this.sunPos;
    this.el.setAttribute('environment', {lightPosition: {x: p.x, y: p.y, z: p.z}});
  }
});

  el.addEventListener('gamepadbuttondown', function (e) {
  console.log('Button "%d" has been pressed.', e.index);
});
</script>

	</head>

	<body>
		<a-scene auto-enter-vr="true" background="color: #ECECEC">
			<a-assets>
				<img id="mozvr" src="img/1200x800.jpg">
				<img id="suardalan" src="img/suardalan.png">
				<img id="bothies" src="img/bothies.png">
				<img id="glendhu" src="img/glendhu.png">
				<img id="ryvoan" src="img/ryvoan.png">
				<img id="rivDesc" src="img/ryvoanDesc.png">
				<img id="linkFrame" src="img/graphicFrame.png">

			</a-assets>

		<!--
        Camera + Gamepad controls
        Button 0 is "A" on an Xbox controller.
      -->



      
	<!-- Camera, pointer & back button --> 
	<a-entity gamepad-controls="flyEnabled: true" id="camera-and-pointer" position="0 3 0" rotation="0 -143 0" sound="src: url(assets/321103__nsstudios__blip1.wav);
                       on: gamepadbuttondown:0">
		<a-camera fov="70">
    		<a-cursor></a-cursor>

  		</a-camera>
  	</a-entity>
<!--environment setup -->
  	
 <a-entity id="environment" environment="preset:starry; lightPosition: 0.0 0.8 2.250; ground:canyon; groundYScale:25; playArea:1; fog:0.500; flatShading:true; grid:dots; gridColor:#FFF" suntime="from: 0 1 0; to: 1 0 0; duration: 50000"></a-entity>
<!-- White round background wallpaper -->
      <a-entity>
        <a-cylinder opacity=0.4 position="0 3.2 0" radius="4" height="1.6" side="back" open-ended="true"
                    color="black" scale="2 4 2"></a-cylinder>
      </a-entity>

      <a-entity id="ryvoanTab" rotation="0 0 0">
      	<a-animation attribute="rotation" from="0 60 0" to="0 0 0" 
                     dur="15000"></a-animation>
<!-- Square background as a frame -->
     <a-curvedimage geometry="height: 6; primitive: cylinder; radius: 7.81; segmentsRadial: 46; thetaLength: 70; openEnded: true" id="mozvr-logo" src="#mozvr" radius="5.7" theta-length="36" height="1"
                     position="0 3.20" opacity="0.5">

	</a-curvedimage>

<!-- Ryvoan text as png -->
	<a-curvedimage geometry="height: 1.08; primitive: cylinder; radius: 7.61; segmentsRadial: 46; thetaLength: 20; openEnded: true" id="suardalan-text" src="#suardalan" radius="5.7" theta-length="36" height="1"
                     position="0 5.4 0" rotation="0 44.4 0" opacity="0.4" hlink="http://cablecenter.org">
                      <a-animation begin="mouseenter"  attribute="opacity"  dur="550" fill="from" from="0.4" to="1"></a-animation>
                      <a-animation begin="mouseleave"  attribute="opacity"  dur="550" fill="from" from="1" to="0.4"> </a-animation>
                      <a-animation attribute="scale" begin="mouseenter" dur="500" to="1.1 1.1 1"></a-animation>
 					  <a-animation attribute="scale" begin="mouseleave" dur="500" to="1 1 1"></a-animation>
 					  					  
		</a-curvedimage>
<!-- Ryvoan description as png -->
<a-curvedimage geometry="height: 3.6; primitive: cylinder; radius: 7.61; segmentsRadial: 46; thetaLength: 27; openEnded: true" id="suardalan-desc" src="#rivDesc" radius="5.7" theta-length="36" height="1"
                     position="0 2.7 0" rotation="0 36.6 0" opacity="0.4">
	                  <a-animation begin="mouseenter"  attribute="opacity"  dur="1000" fill="from" from="0.4" to="1"></a-animation>
                      <a-animation begin="mouseleave"  attribute="opacity"  dur="1000" fill="from" from="1" to="0.4"> </a-animation>
                      <a-animation attribute="scale" begin="mouseenter" dur="1000" to="1.1 1.1 1"></a-animation>
 					  <a-animation attribute="scale" begin="mouseleave" dur="1000" to="1 1 1"></a-animation>
		</a-curvedimage>

<a-curvedimage geometry="height: 1.8; primitive: cylinder; radius: 7.61; segmentsRadial: 46; thetaLength: 27; openEnded: true" id="suardalan-map-link" src="#linkFrame" radius="5.7" theta-length="36" height="1"
                     position="0 1.6 0" rotation="0 4.6 0" opacity="0.4" hlink="suardalan_3dmap.html; on: gamepadbuttondown:1">
	                  <a-animation begin="mouseenter"  attribute="opacity"  dur="1000" fill="from" from="0.4" to="1"></a-animation>
                      <a-animation begin="mouseleave"  attribute="opacity"  dur="1000" fill="from" from="1" to="0.4"> </a-animation>
                      <a-animation attribute="scale" begin="mouseenter" dur="1000" to="1.1 1.1 1"></a-animation>
 					  <a-animation attribute="scale" begin="mouseleave" dur="1000" to="1 1 1"></a-animation>
		</a-curvedimage>	

<a-curvedimage geometry="height: 1.8; primitive: cylinder; radius: 7.61; segmentsRadial: 46; thetaLength: 27; openEnded: true" id="suardalan-map-link" src="#linkFrame" radius="5.7" theta-length="36" height="1"
                     position="0 3.8 0" rotation="0 4.6 0" opacity="0.4">
	                  <a-animation begin="mouseenter"  attribute="opacity"  dur="1000" fill="from" from="0.4" to="1"></a-animation>
                      <a-animation begin="mouseleave"  attribute="opacity"  dur="1000" fill="from" from="1" to="0.4"> </a-animation>
                      <a-animation attribute="scale" begin="mouseenter" dur="1000" to="1.1 1.1 1"></a-animation>
 					  <a-animation attribute="scale" begin="mouseleave" dur="1000" to="1 1 1"></a-animation>
		</a-curvedimage>	
			
	</a-entity>

 		<a-light type="directional" color="#fff" intensity="0.2" position="-1 2 1"></a-light>
      	<a-light type="ambient" color="#fff"></a-light>


		</a-scene>

	</body>
</html>

